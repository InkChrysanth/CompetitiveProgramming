本题考察了数论的相关知识。

### 30pts

暴力枚举每次洗牌的情况，时间复杂度为 $O(n^2)$。

### 60pts

首先卡牌 $1$ 和 $2n$ 一直不动，可以不用考虑这两张牌。

将位置和剩下的牌上的数字全减 $1$，那么数字为 $k$ 的牌操作一次后就会到 $2k\bmod (2n-1)$ 的位置。

那么问题相当于找最小的 $k$ 使得 $\forall t,t\times 2^{k}\equiv t\pmod {(2n-1)}$，显然只需要考虑 $2^{k}\equiv 1\pmod {(2n-1)}$​ 就行了，$O(n)$ 暴力检验即可。

### 100pts

根据欧拉定理，$k$ 必然是 $\varphi(2n-1)$ 的因数，而 $10^{18}$ 范围内的正整数的约数个数大约只有 $10^6$ 级别，直接暴力快速幂判定就能过了。

