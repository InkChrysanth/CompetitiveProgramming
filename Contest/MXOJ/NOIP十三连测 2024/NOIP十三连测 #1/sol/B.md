主要考察了构造的思想以及数论的相关内容。

### 30pts

通过搜索进行暴力求解。

### +10pts

任意发现 $n$ 为偶数时需要奇数条边，每次加两条边不可能满足条件，所以无解。

### +30pts

$\gcd(n,k)=1$ 时，容易发现 $1,1+k,1+2k,1+3k,…,1+(n-1)k$ 这些数两两不同。

那么按照这个顺序，第一次操作取 $(1,1+k)$，第二次操作取 $(1+3k,1+4k)$ 以此类推，即可连出一条链。

### 100pts

我们把所有数按如下方式写出来。
$$
\begin{matrix}
   0 & k & 2k & 3k & 4k \\
   1 & 1+k & 1+2k & 1+3k & 1+4k \\
   2 & 2+k & 2+2k & 2+3k & 2+4k \\
   3 & 3+k & 3+2k & 3+3k & 3+4k \\
   4 & 4+k & 4+2k & 4+3k & 4+4k \\
  \end{matrix}
$$
其中矩阵的列为 $\gcd(n,k)$。

以 $n=25,k=5$ 为例
$$
\begin{matrix}
   0 & 5 & 10 & 15 & 20 \\
   1 & 6 & 11 & 16 & 21 \\
   2 & 7 & 12 & 17 & 22 \\
   3 & 8 & 13 & 18 & 23 \\
   4 & 9 & 14 & 19 & 24 \\
  \end{matrix}
$$
因为 $n$ 为奇数，所以这个矩形的行和列一定都是奇数。

我们可以把每个点都和它右下角的那个点连接，例如操作 $(0,6)$ 可以同时把 $(0,6),(5,11)$ 连接，操作 $(10,16)$ 可以同时把 $(10,16),(15,21)$ 连接，因为每行每列都是奇数，所以这个操作一定是可行的。

现在每条从左上到右下的斜线都已经联通了，我们需要把剩下的这些线连接在一起形成树。

注意到我们每次选择一个点和它正下方的那个点，把任意两条相邻的斜线连接，例如 $(0,6,12,18,24),(5,11,17,23),(10,16,22)$ 这三条直线可以通过操作 $(5,6)$​ 操作直接相连。

那么按照这个顺序把所有相邻的斜线全部连接即可。

时间复杂度为 $O(n)$。
