本题考察了图论的相关知识。

### 30pts

容易发现答案一定为 `Yes`。

### +20pts

枚举每个起点，从该节点出发路径唯一，判定即可。

其实可以直接判定 `(` 和 `)` 个数是否相同，在正解中会给出论证。

### 100pts

首先发现一点：对于一个 `(` 和 `)` **数量相等**的括号环，存在一种从**任意位置**剪开的方案使得剪开后是一个合法括号序列。

在环上将匹配的括号连边，可以发现总会存在一个位置没有边经过，在这里切开即可。

那么题目就转化为了判断是否存在经过所有边的环，要求环上的 `(` 和 `)` 数量相等。

- - -

注意到一条边是可以多次经过的，这让我们想到了**负环**。负环走一圈的权值会变小，那么在该题中的负环就是一条 `(` 和 `)` 数量不相等的环。

把这样的负环可以分成 `(` 环和 `)` 环，即走一圈 `(` 或 `)` 的数量变多。

可以考虑这样几种情况：

* 没有 `(` 环和 `)` 环，由于该图强连通，根据定义可知路径的 `(` 和 `)` 相等，满足条件。
* `(` 环和 `)` 环都有，那么我们一定能通过**分别经过两个环一定次数**来找到一种平衡括号数量的路径，同样满足条件。
* 只有 `(` 环或 `)` 环，由于要经过所有边，无论如何也**无法使得**括号数量平衡，不满足条件。

- - -

那么做法很显然，用 Bellman-Ford 分别求是否存在 `(` 和 `)` 环即可。时间复杂度 O(nm)。
